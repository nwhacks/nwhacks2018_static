<html><head></head><body><dom-module id="admin-shorturls-page"><template><style include="light-page">#input{display:flex;align-items:center;}paper-input{flex-grow:10000;--paper-input-container:{padding-bottom:8px;};}table{width:100%;}</style><h1 title="">Short URLs</h1><table><thead><tr><th>Path</th><th>Redirect To</th><th>Creator</th><th>Created</th></tr></thead><tbody><template is="dom-repeat" items="[[list(urls, urls.*)]]"><tr><td><a target="_blank" href="/[[item.body.path]]">nwhacks.io/[[item.body.path]]</a></td><td><a target="_blank" href="[[item.body.url]]">[[item.body.url]]</a></td><td>[[item.body.creator]]</td><td>[[ago(item.body.created)]]</td><td><paper-icon-button icon="delete-forever" on-tap="delete"></paper-icon-button></td></tr><tr></tr></template></tbody></table><div id="input"><paper-input label="Path" required="" type="text" auto-validate="" value="{{path}}"></paper-input>&nbsp;<paper-input label="Redirect To" required="" type="url" auto-validate="" value="{{url}}"></paper-input>&nbsp;<paper-button on-tap="submit">Add Short URL</paper-button></div><template is="dom-if" if="[[isAdmin]]"><firebase-document path="/admin/shorturls" data="{{urls}}"></firebase-document></template></template><script>var AdminShortURLsPage=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'list',value:function(a){var b,c=[],d=!0,e=!1;try{for(var f,g,h=Object.keys(a)[Symbol.iterator]();!(d=(f=h.next()).done);d=!0)g=f.value,c.push({id:g,email:unescape(g),body:a[g]})}catch(a){e=!0,b=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw b}}return c}},{key:'ago',value:function(a){return a?moment(a).fromNow():'never'}},{key:'validate',value:function(){var a,b=!0,c=!0,d=!1;try{for(var f,g,e=this.$.input.children[Symbol.iterator]();!(c=(f=e.next()).done);c=!0)g=f.value,g.validate&&!g.validate()&&(b=!1)}catch(b){d=!0,a=b}finally{try{!c&&e.return&&e.return()}finally{if(d)throw a}}return b}},{key:'delete',value:function(a){var b=a.model.item;confirm('Delete '+b.body.path+'?')&&this.set(['urls',b.id],null)}},{key:'submit',value:function(){if(this.validate()){var a=this.path.replace(/(^\/+|\/+$)/g,''),b=encodeURIComponent(a).replace(/\./g,'%2E');this.set(['urls',b],{path:a,url:this.url,creator:this.user.displayName+' <'+this.user.email+'>',created:moment().toISOString()}),this.name=''}}}],[{key:'is',get:function(){return'admin-shorturls-page'}}]),b}(Polymer.Element);customElements.define(AdminShortURLsPage.is,AdminShortURLsPage);</script></dom-module></body></html>