<html><head></head><body><dom-module id="admin-shorturls-page"><template><style include="light-page">#input{display:flex;align-items:center;}paper-input{flex-grow:10000;--paper-input-container:{padding-bottom:8px;};}table{width:100%;}h1{padding-top:1em;}</style><h1 title="">Short URLs</h1><table><thead><tr><th>Path</th><th>Redirect To</th><th>Creator</th><th>Created</th></tr></thead><tbody><template is="dom-repeat" items="[[list(urls, urls.*)]]"><tr><td><a target="_blank" href="/[[item.body.path]]">nwhacks.io/[[item.body.path]]</a></td><td><a target="_blank" href="[[item.body.url]]">[[item.body.url]]</a></td><td>[[item.body.creator]]</td><td>[[ago(item.body.created)]]</td><td><paper-icon-button icon="delete-forever" on-tap="delete"></paper-icon-button></td></tr><tr></tr></template></tbody></table><div id="input"><paper-input label="Path" required="" type="text" auto-validate="" value="{{path}}"></paper-input>&nbsp;<paper-input label="Redirect To" required="" type="url" auto-validate="" value="{{url}}"></paper-input>&nbsp;<paper-button on-tap="submit">Add Short URL</paper-button></div><template is="dom-if" if="[[isAdmin]]"><firebase-document path="/admin/shorturls" data="{{urls}}"></firebase-document></template></template><script>var AdminShortURLsPage=function(_Polymer$Element){babelHelpers.inherits(AdminShortURLsPage,_Polymer$Element);function AdminShortURLsPage(){babelHelpers.classCallCheck(this,AdminShortURLsPage);return babelHelpers.possibleConstructorReturn(this,(AdminShortURLsPage.__proto__||Object.getPrototypeOf(AdminShortURLsPage)).apply(this,arguments))}babelHelpers.createClass(AdminShortURLsPage,[{key:"list",value:function list(admins){for(var l=[],_arr=Object.keys(admins),_i=0,id;_i<_arr.length;_i++){id=_arr[_i];l.push({id:id,email:unescape(id),body:admins[id]})}return l}},{key:"ago",value:function ago(time){if(!time){return"never"}return moment(time).fromNow()}},{key:"validate",value:function validate(){var valid=!0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=this.$.input.children[Symbol.iterator](),_step,e;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){e=_step.value;if(e.validate&&!e.validate()){valid=!1}}}catch(err){_didIteratorError=!0;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return valid}},{key:"delete",value:function _delete(e){var url=e.model.item;if(!confirm("Delete ".concat(url.body.path,"?"))){return}this.set(["urls",url.id],null)}},{key:"submit",value:function submit(){if(!this.validate()){return}var path=this.path.replace(/(^\/+|\/+$)/g,""),slug=encodeURIComponent(path).replace(/\./g,"%2E");this.set(["urls",slug],{path:path,url:this.url,creator:"".concat(this.user.displayName," <").concat(this.user.email,">"),created:moment().toISOString()});this.path="";this.url=""}}],[{key:"is",get:function get(){return"admin-shorturls-page"}}]);return AdminShortURLsPage}(Polymer.Element);customElements.define(AdminShortURLsPage.is,AdminShortURLsPage);</script></dom-module></body></html>