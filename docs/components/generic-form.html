<html><head></head><body><div hidden="" by-polymer-bundler=""><script>try{firebase.app()}catch(a){var config={apiKey:"AIzaSyATJyN_W5ZJiiaOPwhn8ljIxn85Eo5uQEA",authDomain:"nwhacks-2018.firebaseapp.com",databaseURL:"https://nwhacks-2018.firebaseio.com",projectId:"nwhacks-2018",storageBucket:"nwhacks-2018.appspot.com",messagingSenderId:"838873768070"};firebase.initializeApp(config)}</script></div><dom-module id="generic-form"><template><style include="shared-styles">form{max-width:640px;margin:0 auto;}.invalid{color:red;}</style><form id="form"><slot name="intro"></slot><paper-input required="" auto-validate="" maxlength="200" error-message="Required" label="What is your legal first name?" placeholder="Enter your first name" name="first_name" value="{{data.first_name}}"></paper-input><paper-input required="" auto-validate="" maxlength="200" error-message="Required" label="What is your legal last name?" placeholder="Enter your last name" name="last_name" value="{{data.last_name}}"></paper-input><paper-input required="" auto-validate="" maxlength="200" error-message="Invalid Email" type="email" placeholder="hacker@email.com" label="What is your email?" name="email" value="{{data.email}}"></paper-input><p class="invalid" hidden$="{{!alreadySubmitted}}">You've already submitted once. You can do so again, but only your last submission will be considered.</p><slot></slot><p class="invalid" hidden$="{{valid}}">You must fill out all required fields.</p><center><paper-button elevation="1" on-tap="submit" class="register">Register</paper-button></center></form><paper-dialog id="registered" modal=""><h2>Submitted!</h2><p>All set! We'll get back to you in a few weeks.</p><div class="buttons"><a href="/"><paper-button dialog-confirm="" autofocus="">Return Home</paper-button></a></div></paper-dialog><paper-dialog id="submitting" modal=""><h2>Submitting...</h2><p><paper-progress indeterminate=""></paper-progress></p></paper-dialog><paper-dialog id="error" modal=""><h2>Error Submitting</h2><p>[[error]]</p><p>Please try again later or use a different browser.</p><div class="buttons"><paper-button dialog-confirm="" autofocus="">close</paper-button></div></paper-dialog></template><script>var GenericForm=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'checkEmail',value:function(a){var b=this;this.checkEmailTimeout&&(clearTimeout(this.checkEmailTimeout),this.checkEmailTimeout=!1),a&&(this.checkEmailTimeout=setTimeout(function(){b.checkEmailTimeout=!1,firebase.database().ref('emails/'+b.name).child(btoa(b.data.email)).once('value').then(function(a){var c=a.val();b.alreadySubmitted=!!c})},200))}},{key:'validate',value:function(){var a,b=!0,c=!0,d=!1;try{for(var e,f,g=this.inputs()[Symbol.iterator]();!(c=(e=g.next()).done);c=!0)f=e.value,f.validate()||(b=!1)}catch(b){d=!0,a=b}finally{try{!c&&g.return&&g.return()}finally{if(d)throw a}}return this.valid=b,b}},{key:'inputs',value:function(){return Array.from(this.children).concat(Array.from(this.$.form.children)).filter(function(b){return b.validate})}},{key:'fileInputs',value:function(){return this.inputs().filter(function(b){return'file'===b.type})}},{key:'submit',value:function(){var a=this;if(this.validate()){this.$.submitting.open();var b,c=firebase.database().ref('ids').push().key,d=Promise.resolve(),e=!0,f=!1;try{for(var g,h=this.fileInputs()[Symbol.iterator]();!(e=(g=h.next()).done);e=!0){var i=g.value,j=i.name,k=i.inputElement.inputElement.files;if(0<k.length){var l=k[0],m=this.cleanFileName(l.name),n=this.name+'/'+j+'/'+c+'-'+m;this.data[j]=n,d=firebase.storage().ref(n).put(l)}}}catch(a){f=!0,b=a}finally{try{!e&&h.return&&h.return()}finally{if(f)throw b}}d.then(function(){return firebase.database().ref('form/'+a.name).child(c).set(a.data)}).then(function(){return firebase.database().ref('emails/'+a.name).child(btoa(a.data.email)).set(!0)}).then(function(b){console.log('Registered',b),a.$.submitting.close(),a.$.registered.open()}).catch(function(b){console.log('Error!',b),a.error=b&&b.message||b,a.$.submitting.close(),a.$.error.open()})}}},{key:'cleanFileName',value:function(a){return a.replace(/[^A-Za-z0-9\.\-\(\)]+/g,'-')}}],[{key:'is',get:function(){return'generic-form'}},{key:'properties',get:function(){return{name:{type:String},alreadySubmitted:{type:Boolean,value:!1},valid:{type:Boolean,notify:!0,value:!0},data:{value:function(){return{}},notify:!0,type:Object}}}},{key:'observers',get:function(){return['checkEmail(data.email)']}}]),b}(Polymer.Element);customElements.define(GenericForm.is,GenericForm);</script></dom-module></body></html>