<html><head></head><body><dom-module id="admin-events-page"><template><style include="light-page">:host{display:flex;flex-direction:column;height:calc(100vh - 65px);padding:0;--paper-input-container:{padding-bottom:16px;};}paper-item{cursor:pointer;}.columns{display:flex;}.columns > div{flex-grow:100000;padding:0 16px;overflow-y:auto;}.columns .rows{display:flex;flex-direction:column;overflow:hidden;}iron-list{flex-grow:100000;margin:0 0;overflow-x:hidden;}</style><div class="columns"><div class="rows"><h1 title="">Events</h1><iron-list items="[[events]]"><template><paper-item on-tap="select"><paper-item-body><div>[[item.name]]</div></paper-item-body></paper-item></template></iron-list></div><template is="dom-if" if="[[slug]]"><div class="fill"><h2>[[slug]]</h2><p>People: [[people]], Servings: [[servings]]</p><ul><template is="dom-repeat" items="[[all(slug, registrations)]]"><li>[[item.raw.first_name]] [[item.raw.last_name]] &lt;[[item.raw.email]]&gt; - [[item.servings]]</li></template></ul></div></template></div><firebase-query disabled="[[!isAdmin]]" path="/admin/events" data="{{events}}"></firebase-query><firebase-query disabled="[[!isAdmin]]" path="/form/registration" data="{{registrations}}"></firebase-query><app-route route="{{route}}" active="{{routeActive}}" pattern="/:slug" data="{{routeData}}" tail="{{subRoute}}"></app-route></template><script>var AdminEventsPage=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'_pathChange',value:function(a){this.slug=a}},{key:'select',value:function(a){this.slug=a.model.item.$key,this.set('route.path',this.slug)}},{key:'all',value:function(a,b){if(a&&b){var c=this.getIDFromSlug(a),d=0,e=b.filter(function(a){return a.events&&a.events[c]}).map(function(a){if(a.events&&a.events[c])return d+=a.events[c],{raw:a,servings:a.events[c]}});return this.servings=d,this.people=e.length,e}}},{key:'getIDFromSlug',value:function(a){var b,c=!0,d=!1;try{for(var e,f,g=this.events[Symbol.iterator]();!(c=(e=g.next()).done);c=!0)if(f=e.value,a===f.$key)return f.name.replace(/ /g,'_').toLowerCase()}catch(a){d=!0,b=a}finally{try{!c&&g.return&&g.return()}finally{if(d)throw b}}}}],[{key:'is',get:function(){return'admin-events-page'}},{key:'observers',get:function(){return['_pathChange(routeData.slug)']}}]),b}(Polymer.Element);customElements.define(AdminEventsPage.is,AdminEventsPage);</script></dom-module></body></html>