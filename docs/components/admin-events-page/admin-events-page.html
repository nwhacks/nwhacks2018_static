<html><head></head><body><dom-module id="admin-events-page"><template><style include="light-page">:host{display:flex;flex-direction:column;height:calc(100vh - 65px);padding:0;--paper-input-container:{padding-bottom:16px;};}paper-item{cursor:pointer;}.columns{display:flex;}.columns > div{flex-grow:100000;padding:0 16px;overflow-y:auto;}.columns .rows{display:flex;flex-direction:column;overflow:hidden;}iron-list{flex-grow:100000;margin:0 0;overflow-x:hidden;}h1{padding-top:1em;}</style><div class="columns"><div class="rows"><h1 title="">Events</h1><iron-list items="[[events]]"><template><paper-item on-tap="select"><paper-item-body><div>[[item.name]]</div></paper-item-body></paper-item></template></iron-list></div><template is="dom-if" if="[[slug]]"><div class="fill"><h2>[[slug]]</h2><p>People: [[people]], Servings: [[servings]]</p><ul><template is="dom-repeat" items="[[all(slug, registrations)]]"><li>[[item.raw.first_name]] [[item.raw.last_name]] &lt;[[item.raw.email]]&gt; - [[item.servings]]</li></template></ul></div></template></div><firebase-query disabled="[[!isAdmin]]" path="/admin/events" data="{{events}}"></firebase-query><firebase-query disabled="[[!isAdmin]]" path="/form/registration" data="{{registrations}}"></firebase-query><app-route route="{{route}}" active="{{routeActive}}" pattern="/:slug" data="{{routeData}}" tail="{{subRoute}}"></app-route></template><script>var AdminEventsPage=function(_Polymer$Element){babelHelpers.inherits(AdminEventsPage,_Polymer$Element);function AdminEventsPage(){babelHelpers.classCallCheck(this,AdminEventsPage);return babelHelpers.possibleConstructorReturn(this,(AdminEventsPage.__proto__||Object.getPrototypeOf(AdminEventsPage)).apply(this,arguments))}babelHelpers.createClass(AdminEventsPage,[{key:"_pathChange",value:function _pathChange(slug){this.slug=slug}},{key:"select",value:function select(e){this.slug=e.model.item.$key;this.set("route.path",this.slug)}},{key:"all",value:function(slug,registrations){if(!slug||!registrations){return}var id=this.getIDFromSlug(slug),servings=0,all=registrations.filter(function(hacker){return hacker.events&&hacker.events[id]}).map(function(hacker){if(!hacker.events||!hacker.events[id]){return}servings+=hacker.events[id];return{raw:hacker,servings:hacker.events[id]}});this.servings=servings;this.people=all.length;return all}},{key:"getIDFromSlug",value:function getIDFromSlug(slug){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=this.events[Symbol.iterator](),_step,event;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){event=_step.value;if(slug===event.$key){return event.name.replace(/ /g,"_").toLowerCase()}}}catch(err){_didIteratorError=!0;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}}}],[{key:"is",get:function get(){return"admin-events-page"}},{key:"observers",get:function get(){return["_pathChange(routeData.slug)"]}}]);return AdminEventsPage}(Polymer.Element);customElements.define(AdminEventsPage.is,AdminEventsPage);</script></dom-module></body></html>