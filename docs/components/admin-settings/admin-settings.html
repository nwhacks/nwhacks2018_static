<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="admin-list" assetpath="../"><template><style include="shared-styles">#input{display:flex;align-items:center;}paper-input{flex-grow:10000;}</style><table><thead><tr><th>Name</th><th>Email</th><th>Last Accessed</th></tr></thead><tbody><template is="dom-repeat" items="[[list(admins, admins.*)]]"><tr><td>[[item.body.name]]</td><td><a href="mailto:[[item.email]]">[[item.email]]</a></td><td>[[ago(item.body.last_accessed)]]</td><td><paper-icon-button icon="delete-forever" on-tap="delete"></paper-icon-button></td></tr><tr></tr></template></tbody></table><div id="input"><paper-input label="Name" required="" type="name" auto-validate="" value="{{name}}"></paper-input>&nbsp;<paper-input label="Email" required="" type="email" auto-validate="" value="{{email}}"></paper-input>&nbsp;<paper-button on-tap="submit">Add Admin</paper-button></div><template is="dom-if" if="[[isAdmin]]"><firebase-document path="/admins" data="{{admins}}"></firebase-document></template></template><script>var AdminList=function(_Polymer$Element){babelHelpers.inherits(AdminList,_Polymer$Element);function AdminList(){babelHelpers.classCallCheck(this,AdminList);return babelHelpers.possibleConstructorReturn(this,(AdminList.__proto__||Object.getPrototypeOf(AdminList)).apply(this,arguments))}babelHelpers.createClass(AdminList,[{key:"list",value:function list(admins){for(var l=[],_arr=Object.keys(admins),_i=0,id;_i<_arr.length;_i++){id=_arr[_i];l.push({id:id,email:unescape(id),body:admins[id]})}return l}},{key:"ago",value:function ago(time){if(!time){return"never"}return moment(time).fromNow()}},{key:"validate",value:function validate(){var valid=!0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=this.$.input.children[Symbol.iterator](),_step,e;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){e=_step.value;if(e.validate&&!e.validate()){valid=!1}}}catch(err){_didIteratorError=!0;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return valid}},{key:"formatEmail",value:function formatEmail(email){if(!email){return}return email.replace(/\./g,"%2E")}},{key:"submit",value:function submit(){if(!this.validate()){return}var email=this.email.toLowerCase();this.set(["admins",this.formatEmail(email)],{name:this.name,email:email});this.name="";this.email=""}},{key:"delete",value:function _delete(e){var admin=e.model.item,name=admin.body.name||"";if(!confirm("Remove admin "+name+" ("+admin.email+")?")){return}this.set(["admins",admin.id],null)}}],[{key:"is",get:function get(){return"admin-list"}}]);return AdminList}(Polymer.Element);customElements.define(AdminList.is,AdminList);</script></dom-module><dom-module id="tag-manager" assetpath="../"><template><style include="shared-styles">#input{display:flex;align-items:center;}paper-input{flex-grow:10000;--paper-input-container:{padding-bottom:8px;};}table{width:100%;}</style><table><thead><tr><th>Tag</th><th>Created</th><th>RSVP By</th><th>Locked</th></tr></thead><tbody><template is="dom-repeat" items="{{_tags}}"><tr><td><nw-tag tag="[[item.name]]"></nw-tag></td><td>[[ago(item.created)]]</td><td><paper-input label="RSVP By" type="date" disabled="[[item.locked]]" value="{{item.rsvp_by}}"></paper-input></td><td><paper-icon-button icon="[[lockIcon(item.locked)]]" on-tap="lock"></paper-icon-button><template is="dom-if" if="[[!item.locked]]"><paper-icon-button icon="delete-forever" on-tap="delete"></paper-icon-button></template></td></tr><tr></tr></template></tbody></table><div id="input"><paper-input label="Tag" required="" type="name" auto-validate="" value="{{name}}"></paper-input>&nbsp;<paper-button on-tap="submit">Add Tag</paper-button></div><template is="dom-if" if="[[isAdmin]]"><firebase-document path="/admin/tags" data="{{tags}}"></firebase-document></template></template><script>var TagManager=function(_Polymer$Element){babelHelpers.inherits(TagManager,_Polymer$Element);function TagManager(){babelHelpers.classCallCheck(this,TagManager);return babelHelpers.possibleConstructorReturn(this,(TagManager.__proto__||Object.getPrototypeOf(TagManager)).apply(this,arguments))}babelHelpers.createClass(TagManager,[{key:"_updateTags",value:function _updateTags(tags){for(var _this=this,l=[],_arr=Object.keys(tags),_i=0;_i<_arr.length;_i++){var id=_arr[_i],tag=tags[id];if(!tag){continue}l.push(tag)}this._tags=l;l.forEach(function(tag,i){_this.linkPaths(["tags",tag.name],["_tags",i]);_this.linkPaths(["_tags",i],["tags",tag.name])})}},{key:"ago",value:function ago(time){if(!time){return"never"}return moment(time).fromNow()}},{key:"lockIcon",value:function lockIcon(locked){return locked?"lock":"lock-open"}},{key:"validate",value:function validate(){var valid=!0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=this.$.input.children[Symbol.iterator](),_step,e;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){e=_step.value;if(e.validate&&!e.validate()){valid=!1}}}catch(err){_didIteratorError=!0;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return valid}},{key:"lock",value:function lock(e){e.model.set("item.locked",!e.model.item.locked)}},{key:"delete",value:function _delete(e){var tag=e.model.item;if(!confirm("Delete ".concat(tag.name,"?"))){return}this.set(["tags",tag.name],null)}},{key:"submit",value:function submit(){if(!this.validate()){return}var slug=this.name.trim().replace(/\W+/g,"-");this.set(["tags",slug],{slug:slug,name:this.name,created:moment().toISOString()});this.name=""}}],[{key:"is",get:function get(){return"tag-manager"}},{key:"observers",get:function get(){return["_updateTags(tags, tags.*)"]}}]);return TagManager}(Polymer.Element);customElements.define(TagManager.is,TagManager);</script></dom-module><dom-module id="notification-manager" assetpath="../"><template><style></style><h3>Send Notification</h3><paper-input value="{{args.title}}" auto-validate="" required="" label="Title"></paper-input><paper-input value="{{args.body}}" auto-validate="" required="" label="Body"></paper-input><code class="invalid" hidden$="[[!error]]"><pre>[[error]]</pre></code> <code><pre>[[stringify(ret)]]</pre></code><p hidden$="[[!finished]]">Finished!</p><nw-job id="send" args="{{args}}" type="notification.send" finished="{{finished}}" working="{{working}}" return="{{ret}}" error="{{error}}"></nw-job><paper-button class="register" on-tap="send" disabled$="[[working]]">Send</paper-button></template><script>var NotificationManager=function(_Polymer$Element){babelHelpers.inherits(NotificationManager,_Polymer$Element);function NotificationManager(){babelHelpers.classCallCheck(this,NotificationManager);return babelHelpers.possibleConstructorReturn(this,(NotificationManager.__proto__||Object.getPrototypeOf(NotificationManager)).apply(this,arguments))}babelHelpers.createClass(NotificationManager,[{key:"validate",value:function validate(){var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=this.root.querySelectorAll("paper-input")[Symbol.iterator](),_step,e;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){e=_step.value;if(!e.validate()){return!1}}}catch(err){_didIteratorError=!0;_iteratorError=err}finally{try{if(!_iteratorNormalCompletion&&null!=_iterator.return){_iterator.return()}}finally{if(_didIteratorError){throw _iteratorError}}}return!0}},{key:"send",value:function send(){if(!this.validate()){return}this.$.send.generateRequest()}},{key:"stringify",value:function stringify(obj){return JSON.stringify(obj,"","  ")}}],[{key:"is",get:function get(){return"notification-manager"}},{key:"properties",get:function get(){return{args:{value:function value(){return{title:"nwHacks 2018",icon:"/img/nwhacks-navbar-logo.png"}}}}}}]);return NotificationManager}(Polymer.Element);customElements.define(NotificationManager.is,NotificationManager);</script></dom-module></div><dom-module id="admin-settings"><template><style include="light-page">h1{padding-top:1em;}</style><h1 title="">Admin Settings</h1><div class="content"><h2>Permissions</h2><admin-list is-admin="[[isAdmin]]"></admin-list><h2>Tags</h2><tag-manager is-admin="[[isAdmin]]"></tag-manager><h2>Notifications</h2><notification-manager is-admin="[[isAdmin]]"></notification-manager></div></template><script>var AdminSettings=function(_Polymer$Element){babelHelpers.inherits(AdminSettings,_Polymer$Element);function AdminSettings(){babelHelpers.classCallCheck(this,AdminSettings);return babelHelpers.possibleConstructorReturn(this,(AdminSettings.__proto__||Object.getPrototypeOf(AdminSettings)).apply(this,arguments))}babelHelpers.createClass(AdminSettings,null,[{key:"is",get:function get(){return"admin-settings"}}]);return AdminSettings}(Polymer.Element);customElements.define(AdminSettings.is,AdminSettings);</script></dom-module></body></html>