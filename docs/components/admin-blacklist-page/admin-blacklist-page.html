<html><head></head><body><dom-module id="admin-blacklist-page"><template><style include="light-page">#input{display:flex;align-items:center;}paper-input{flex-grow:10000;}h1{padding-top:1em;}</style><h1 title="">Blacklist</h1><table><thead><tr><th>Name</th><th>Email</th><th>Date</th><th>Reason</th></tr></thead><tbody><template is="dom-repeat" items="[[list(blacklist, blacklist.*)]]"><tr><td>[[item.body.name]]</td><td><a href="mailto:[[item.email]]">[[item.email]]</a></td><td>[[ago(item.body.date)]]</td><td>[[item.body.reason]]</td><td><paper-icon-button icon="delete-forever" on-tap="delete"></paper-icon-button></td></tr><tr></tr></template></tbody></table><h2>Add</h2><div id="input"><paper-input label="Name" required="" type="name" auto-validate="" value="{{name}}"></paper-input>&nbsp;<paper-input label="Email" required="" type="email" auto-validate="" value="{{email}}"></paper-input>&nbsp;<paper-input label="Reason" required="" type="text" auto-validate="" value="{{reason}}"></paper-input>&nbsp;<paper-button on-tap="submit">Add entry</paper-button></div><template is="dom-if" if="[[isAdmin]]"><firebase-document path="/admin/blacklist" data="{{blacklist}}"></firebase-document></template></template><script>var AdminBlacklistPage=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'list',value:function(a){var b,c=[],d=!0,e=!1;try{for(var f,g,h=Object.keys(a)[Symbol.iterator]();!(d=(f=h.next()).done);d=!0)g=f.value,c.push({id:g,email:unescape(g),body:a[g]})}catch(a){e=!0,b=a}finally{try{!d&&h.return&&h.return()}finally{if(e)throw b}}return c}},{key:'ago',value:function(a){return a?moment(a).fromNow():'never'}},{key:'validate',value:function(){var a,b=!0,c=!0,d=!1;try{for(var f,g,e=this.$.input.children[Symbol.iterator]();!(c=(f=e.next()).done);c=!0)g=f.value,g.validate&&!g.validate()&&(b=!1)}catch(b){d=!0,a=b}finally{try{!c&&e.return&&e.return()}finally{if(d)throw a}}return b}},{key:'formatEmail',value:function(a){return a?a.replace(/\./g,'%2E'):void 0}},{key:'submit',value:function(){if(this.validate()){var a=this.email.toLowerCase();this.set(['blacklist',this.formatEmail(a)],{name:this.name,email:a,reason:this.reason,date:firebase.database.ServerValue.TIMESTAMP}),this.name='',this.email='',this.reason=''}}},{key:'delete',value:function(a){var b=a.model.item,c=b.body.name||'';confirm('Remove from blacklist '+c+' ('+b.email+')?')&&this.set(['blacklist',b.id],null)}}],[{key:'is',get:function(){return'admin-blacklist-page'}}]),b}(Polymer.Element);customElements.define(AdminBlacklistPage.is,AdminBlacklistPage);</script></dom-module></body></html>