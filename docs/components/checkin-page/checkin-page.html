<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="iron-image" assetpath="../../bower_components/iron-image/"><template><style>:host{display:inline-block;overflow:hidden;position:relative;}#baseURIAnchor{display:none;}#sizedImgDiv{position:absolute;top:0px;right:0px;bottom:0px;left:0px;display:none;}#img{display:block;width:var(--iron-image-width, auto);height:var(--iron-image-height, auto);}:host([sizing]) #sizedImgDiv{display:block;}:host([sizing]) #img{display:none;}#placeholder{position:absolute;top:0px;right:0px;bottom:0px;left:0px;background-color:inherit;opacity:1;@apply --iron-image-placeholder;}#placeholder.faded-out{transition:opacity 0.5s linear;opacity:0;}</style><a id="baseURIAnchor" href="#"></a><div id="sizedImgDiv" role="img" hidden$="[[_computeImgDivHidden(sizing)]]" aria-hidden$="[[_computeImgDivARIAHidden(alt)]]" aria-label$="[[_computeImgDivARIALabel(alt, src)]]"></div><img id="img" alt$="[[alt]]" hidden$="[[_computeImgHidden(sizing)]]" crossorigin$="[[crossorigin]]" on-load="_imgOnLoad" on-error="_imgOnError"><div id="placeholder" hidden$="[[_computePlaceholderHidden(preload, fade, loading, loaded)]]" class$="[[_computePlaceholderClassName(preload, fade, loading, loaded)]]"></div></template><script>Polymer({is:'iron-image',properties:{src:{type:String,value:''},alt:{type:String,value:null},crossorigin:{type:String,value:null},preventLoad:{type:Boolean,value:!1},sizing:{type:String,value:null,reflectToAttribute:!0},position:{type:String,value:'center'},preload:{type:Boolean,value:!1},placeholder:{type:String,value:null,observer:'_placeholderChanged'},fade:{type:Boolean,value:!1},loaded:{notify:!0,readOnly:!0,type:Boolean,value:!1},loading:{notify:!0,readOnly:!0,type:Boolean,value:!1},error:{notify:!0,readOnly:!0,type:Boolean,value:!1},width:{observer:'_widthChanged',type:Number,value:null},height:{observer:'_heightChanged',type:Number,value:null}},observers:['_transformChanged(sizing, position)','_loadStateObserver(src, preventLoad)'],created:function(){this._resolvedSrc=''},_imgOnLoad:function(){this.$.img.src!==this._resolveSrc(this.src)||(this._setLoading(!1),this._setLoaded(!0),this._setError(!1))},_imgOnError:function(){this.$.img.src!==this._resolveSrc(this.src)||(this.$.img.removeAttribute('src'),this.$.sizedImgDiv.style.backgroundImage='',this._setLoading(!1),this._setLoaded(!1),this._setError(!0))},_computePlaceholderHidden:function(){return!this.preload||!this.fade&&!this.loading&&this.loaded},_computePlaceholderClassName:function(){return this.preload&&this.fade&&!this.loading&&this.loaded?'faded-out':''},_computeImgDivHidden:function(){return!this.sizing},_computeImgDivARIAHidden:function(){return''===this.alt?'true':void 0},_computeImgDivARIALabel:function(){if(null!==this.alt)return this.alt;if(''===this.src)return'';var a=this._resolveSrc(this.src);return a.replace(/[?|#].*/g,'').split('/').pop()},_computeImgHidden:function(){return!!this.sizing},_widthChanged:function(){this.style.width=isNaN(this.width)?this.width:this.width+'px'},_heightChanged:function(){this.style.height=isNaN(this.height)?this.height:this.height+'px'},_loadStateObserver:function(a,b){var c=this._resolveSrc(a);c===this._resolvedSrc||(this._resolvedSrc='',this.$.img.removeAttribute('src'),this.$.sizedImgDiv.style.backgroundImage='',''===a||b?(this._setLoading(!1),this._setLoaded(!1),this._setError(!1)):(this._resolvedSrc=c,this.$.img.src=this._resolvedSrc,this.$.sizedImgDiv.style.backgroundImage='url("'+this._resolvedSrc+'")',this._setLoading(!0),this._setLoaded(!1),this._setError(!1)))},_placeholderChanged:function(){this.$.placeholder.style.backgroundImage=this.placeholder?'url("'+this.placeholder+'")':''},_transformChanged:function(){var a=this.$.sizedImgDiv.style,b=this.$.placeholder.style;a.backgroundSize=b.backgroundSize=this.sizing,a.backgroundPosition=b.backgroundPosition=this.sizing?this.position:'',a.backgroundRepeat=b.backgroundRepeat=this.sizing?'no-repeat':''},_resolveSrc:function(a){var b=Polymer.ResolveUrl.resolveUrl(a,this.$.baseURIAnchor.href);return'/'===b[0]&&(b=(location.origin||location.protocol+'//'+location.host)+b),b}});</script></dom-module><dom-module id="paper-card" assetpath="../../bower_components/paper-card/"><template><style include="paper-material-styles">:host{display:inline-block;position:relative;box-sizing:border-box;background-color:var(--paper-card-background-color, var(--primary-background-color));border-radius:2px;@apply --paper-font-common-base;@apply --paper-card;}[hidden]{display:none !important;}.header{position:relative;border-top-left-radius:inherit;border-top-right-radius:inherit;overflow:hidden;@apply --paper-card-header;}.header iron-image{display:block;width:100%;--iron-image-width:100%;pointer-events:none;@apply --paper-card-header-image;}.header .title-text{padding:16px;font-size:24px;font-weight:400;color:var(--paper-card-header-color, #000);@apply --paper-card-header-text;}.header .title-text.over-image{position:absolute;bottom:0px;@apply --paper-card-header-image-text;}:host ::slotted(.card-content){padding:16px;position:relative;@apply --paper-card-content;}:host ::slotted(.card-actions){border-top:1px solid #e8e8e8;padding:5px 16px;position:relative;@apply --paper-card-actions;}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}</style><div class="header"><iron-image hidden$="[[!image]]" aria-hidden$="[[_isHidden(image)]]" src="[[image]]" alt="[[alt]]" placeholder="[[placeholderImage]]" preload="[[preloadImage]]" fade="[[fadeImage]]"></iron-image><div hidden$="[[!heading]]" class$="title-text [[_computeHeadingClass(image)]]">[[heading]]</div></div><slot></slot></template><script>Polymer({is:'paper-card',properties:{heading:{type:String,value:'',observer:'_headingChanged'},image:{type:String,value:''},alt:{type:String},preloadImage:{type:Boolean,value:!1},fadeImage:{type:Boolean,value:!1},placeholderImage:{type:String,value:null},elevation:{type:Number,value:1,reflectToAttribute:!0},animatedShadow:{type:Boolean,value:!1},animated:{type:Boolean,reflectToAttribute:!0,readOnly:!0,computed:'_computeAnimated(animatedShadow)'}},_isHidden:function(a){return a?'false':'true'},_headingChanged:function(a){var b=this.getAttribute('heading'),c=this.getAttribute('aria-label');('string'!==typeof c||c===b)&&this.setAttribute('aria-label',a)},_computeHeadingClass:function(a){return a?' over-image':''},_computeAnimated:function(a){return a}});</script></dom-module></div><dom-module id="checkin-page"><template><style>:host{margin:0 auto;max-width:600px;--primary-text-color:#FFFFFF;--secondary-text-color:#CCCCCC;--primary-color:#90cfaa;display:block;}paper-card{width:100%;color:black;}paper-checkbox{width:100%;margin-top:16px;box-sizing:border-box;text-decoration:none;letter-spacing:2px;border-radius:3px;border:none;font-weight:bold;letter-spacing:3px;padding:11px 15px;text-transform:uppercase;cursor:pointer;border-bottom:4px solid #D74343;background-color:#FF6B6B;--paper-checkbox-label:{width:100%;text-align:center;position:absolute;left:0;padding-left:0;};transition:background-color 140ms, border-color 140ms;}paper-checkbox[checked]{border-color:#4BAE74;background-color:#90cfaa;}[bad]{color:red;}[good]{color:green;}[warn]{color:orange;}.completion{padding:10px;cursor:pointer;}.completion:hover{background-color:rgba(0,0,0,0.2);}.completion[selected]{background-color:rgba(0,0,0,0.5);}[hidden]{display:none;}code{font-family:monospace;background-color:rgba(0,0,0,0.5);padding:6px;}h3{margin-top:80px;}paper-card p{font-size:24pt;text-align:center;text-transform:capitalize;padding:10px;font-weight:lighter;border-radius:3px;}paper-card p[warn]{background-color:#f28500;color:white;}paper-card p[danger]{background-color:#D74343;color:white;}p:empty{display:none;}p:first-child{margin-top:0;}</style><h1>Check-In</h1><center><p><small><b>Shortcuts:</b> Search <code>/</code>, Check-In <code>space</code></small></p></center><paper-input label="Search" value="{{query}}" id="search"><iron-icon icon="icons:search" prefix=""></iron-icon></paper-input><template is="dom-repeat" items="[[autocomplete]]"><div class="completion" selected$="[[eq(index, autocompleteIndex)]]" on-tap="handleTap">[[name(registrations, item)]] &lt;[[email(registrations, item)]]&gt;</div></template><paper-card heading="[[heading(display)]]" hidden$="[[!display]]"><div class="card-content"><p warn$="[[warnStatus(display)]]" danger$="[[dangerStatus(display)]]">[[displayStatus(display)]]</p><p warn$="[[warnAge(display.rsvp.age)]]">[[display.rsvp.age]]</p><paper-checkbox id="checkbox" checked="{{display.checked_in}}">Checked In</paper-checkbox></div></paper-card><firebase-config is-admin="{{isAdmin}}" auth="" name="checkin"></firebase-config><template is="dom-if" if="[[isAdmin]]"><firebase-document id="regs" app-name="checkin" path="/registrations" data="{{registrations}}"></firebase-document></template></template><script>Polymer({is:'checkin-page',properties:{display:{value:!1}},observers:['handleRegistrations(registrations)','handleSearch(query, lunr)','updateStatus(display.checked_in)'],ready:function(){var a=this;this.$.search.addEventListener('keydown',function(b){if(b.stopPropagation(),'ArrowDown'===b.code)a.autocompleteIndex=Math.min(a.autocompleteIndex+1,a.autocomplete.length-1);else if('ArrowUp'===b.code)a.autocompleteIndex=Math.max(a.autocompleteIndex-1,0);else if('Enter'===b.code)a.select();else return;b.preventDefault()}),this.keyHandler=this.keyHandler.bind(this)},attached:function(){document.addEventListener('keydown',this.keyHandler)},detached:function(){document.removeEventListener('keydown',this.keyHandler)},keyHandler:function(a){if('Slash'===a.code)this.$.search.inputElement.focus();else if('Space'===a.code&&this.display)this.set('display.checked_in',!this.display.checked_in);else return;a.preventDefault()},handleTap:function(a){this.autocompleteIndex=a.model.index,this.select()},select:function(){var a=this.autocomplete[this.autocompleteIndex];if(a){this.displayID=a;var b=this.registrations[a];void 0===b.checked_in&&(b.checked_in=!1),this.query='',this.display=b,this.autocomplete=[],this.$.search.inputElement.blur()}},heading:function(a){return a.name+' <'+a.email+'>'},eq:function(c,a){return c===a},handleRegistrations:function(a){this.updateDuplicateIndex(a),this.updateLunrIndex(a)},updateDuplicateIndex:function(a){var b=this,c=Object.keys(a).sort(),d={};c.forEach(function(c){var e=a[c],f=b.cleanEmail(e.email);e.cleanEmail=f;var g=d[f]||{count:0},h=g.count;d[f]={last:e.id,count:h+1}});var e={};c.forEach(function(b,c){var f=a[b],g=d[f.cleanEmail],h=g.last,i=g.count;1<i&&h!==f.id&&(e[c]=!0)}),this.duplicateIndices=e},cleanEmail:function(a){return a.toLowerCase().trim()},handleSearch:function(a){var b=this.lunr.search(a).slice(0,5).map(function(b){return b.ref});JSON.stringify(b)!==JSON.stringify(this.autocomplete)&&(this.autocompleteIndex=0,this.autocomplete=b,this.display=!1)},updateLunrIndex:function(a){var b=this,c=Object.keys(a).sort(),d=c.length;if(this.lastLunrIndexCount!==d){this.lastLunrIndexCount=d;var e=lunr(function(){this.ref('id'),this.field('email'),this.field('emailSplit'),this.field('name')});c.forEach(function(c,d){if(!b.duplicateIndices[d]){var f=a[c];e.add({id:c,email:f.email,emailSplit:f.email.replace(/\W+/g,' '),name:f.name})}}),this.lunr=e}},name:function(a,b){return a[b].name},email:function(a,b){return a[b].email},warnStatus:function(a){var b=this.displayStatus(a);return'Accepted, No Response'===b||'waitlisted'===b},dangerStatus:function(a){var b=this.displayStatus(a);return'rejected'===b},displayStatus:function(a){return'accepted'===a.status?a.rsvp?'accepted':'Accepted, No Response':a.status},warnAge:function(a){return a&&-1!==a.indexOf('under')},updateStatus:function(){var a=this.querySelector('#regs');a&&this.displayID&&this.display&&a.setStoredValue('/registrations/'+this.displayID+'/checked_in',this.display.checked_in)}});</script></dom-module></body></html>