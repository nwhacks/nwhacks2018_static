<html><head></head><body><div hidden="" by-polymer-bundler=""><dom-module id="iron-image" assetpath="../../bower_components/iron-image/"><template><style>:host{display:inline-block;overflow:hidden;position:relative;}#baseURIAnchor{display:none;}#sizedImgDiv{position:absolute;top:0px;right:0px;bottom:0px;left:0px;display:none;}#img{display:block;width:var(--iron-image-width, auto);height:var(--iron-image-height, auto);}:host([sizing]) #sizedImgDiv{display:block;}:host([sizing]) #img{display:none;}#placeholder{position:absolute;top:0px;right:0px;bottom:0px;left:0px;background-color:inherit;opacity:1;@apply --iron-image-placeholder;}#placeholder.faded-out{transition:opacity 0.5s linear;opacity:0;}</style><a id="baseURIAnchor" href="#"></a><div id="sizedImgDiv" role="img" hidden$="[[_computeImgDivHidden(sizing)]]" aria-hidden$="[[_computeImgDivARIAHidden(alt)]]" aria-label$="[[_computeImgDivARIALabel(alt, src)]]"></div><img id="img" alt$="[[alt]]" hidden$="[[_computeImgHidden(sizing)]]" crossorigin$="[[crossorigin]]" on-load="_imgOnLoad" on-error="_imgOnError"><div id="placeholder" hidden$="[[_computePlaceholderHidden(preload, fade, loading, loaded)]]" class$="[[_computePlaceholderClassName(preload, fade, loading, loaded)]]"></div></template><script>Polymer({is:'iron-image',properties:{src:{type:String,value:''},alt:{type:String,value:null},crossorigin:{type:String,value:null},preventLoad:{type:Boolean,value:!1},sizing:{type:String,value:null,reflectToAttribute:!0},position:{type:String,value:'center'},preload:{type:Boolean,value:!1},placeholder:{type:String,value:null,observer:'_placeholderChanged'},fade:{type:Boolean,value:!1},loaded:{notify:!0,readOnly:!0,type:Boolean,value:!1},loading:{notify:!0,readOnly:!0,type:Boolean,value:!1},error:{notify:!0,readOnly:!0,type:Boolean,value:!1},width:{observer:'_widthChanged',type:Number,value:null},height:{observer:'_heightChanged',type:Number,value:null}},observers:['_transformChanged(sizing, position)','_loadStateObserver(src, preventLoad)'],created:function(){this._resolvedSrc=''},_imgOnLoad:function(){this.$.img.src!==this._resolveSrc(this.src)||(this._setLoading(!1),this._setLoaded(!0),this._setError(!1))},_imgOnError:function(){this.$.img.src!==this._resolveSrc(this.src)||(this.$.img.removeAttribute('src'),this.$.sizedImgDiv.style.backgroundImage='',this._setLoading(!1),this._setLoaded(!1),this._setError(!0))},_computePlaceholderHidden:function(){return!this.preload||!this.fade&&!this.loading&&this.loaded},_computePlaceholderClassName:function(){return this.preload&&this.fade&&!this.loading&&this.loaded?'faded-out':''},_computeImgDivHidden:function(){return!this.sizing},_computeImgDivARIAHidden:function(){return''===this.alt?'true':void 0},_computeImgDivARIALabel:function(){if(null!==this.alt)return this.alt;if(''===this.src)return'';var a=this._resolveSrc(this.src);return a.replace(/[?|#].*/g,'').split('/').pop()},_computeImgHidden:function(){return!!this.sizing},_widthChanged:function(){this.style.width=isNaN(this.width)?this.width:this.width+'px'},_heightChanged:function(){this.style.height=isNaN(this.height)?this.height:this.height+'px'},_loadStateObserver:function(a,b){var c=this._resolveSrc(a);c===this._resolvedSrc||(this._resolvedSrc='',this.$.img.removeAttribute('src'),this.$.sizedImgDiv.style.backgroundImage='',''===a||b?(this._setLoading(!1),this._setLoaded(!1),this._setError(!1)):(this._resolvedSrc=c,this.$.img.src=this._resolvedSrc,this.$.sizedImgDiv.style.backgroundImage='url("'+this._resolvedSrc+'")',this._setLoading(!0),this._setLoaded(!1),this._setError(!1)))},_placeholderChanged:function(){this.$.placeholder.style.backgroundImage=this.placeholder?'url("'+this.placeholder+'")':''},_transformChanged:function(){var a=this.$.sizedImgDiv.style,b=this.$.placeholder.style;a.backgroundSize=b.backgroundSize=this.sizing,a.backgroundPosition=b.backgroundPosition=this.sizing?this.position:'',a.backgroundRepeat=b.backgroundRepeat=this.sizing?'no-repeat':''},_resolveSrc:function(a){var b=Polymer.ResolveUrl.resolveUrl(a,this.$.baseURIAnchor.href);return'/'===b[0]&&(b=(location.origin||location.protocol+'//'+location.host)+b),b}});</script></dom-module><dom-module id="paper-card" assetpath="../../bower_components/paper-card/"><template><style include="paper-material-styles">:host{display:inline-block;position:relative;box-sizing:border-box;background-color:var(--paper-card-background-color, var(--primary-background-color));border-radius:2px;@apply --paper-font-common-base;@apply --paper-card;}[hidden]{display:none !important;}.header{position:relative;border-top-left-radius:inherit;border-top-right-radius:inherit;overflow:hidden;@apply --paper-card-header;}.header iron-image{display:block;width:100%;--iron-image-width:100%;pointer-events:none;@apply --paper-card-header-image;}.header .title-text{padding:16px;font-size:24px;font-weight:400;color:var(--paper-card-header-color, #000);@apply --paper-card-header-text;}.header .title-text.over-image{position:absolute;bottom:0px;@apply --paper-card-header-image-text;}:host ::slotted(.card-content){padding:16px;position:relative;@apply --paper-card-content;}:host ::slotted(.card-actions){border-top:1px solid #e8e8e8;padding:5px 16px;position:relative;@apply --paper-card-actions;}:host([elevation="1"]){@apply --paper-material-elevation-1;}:host([elevation="2"]){@apply --paper-material-elevation-2;}:host([elevation="3"]){@apply --paper-material-elevation-3;}:host([elevation="4"]){@apply --paper-material-elevation-4;}:host([elevation="5"]){@apply --paper-material-elevation-5;}</style><div class="header"><iron-image hidden$="[[!image]]" aria-hidden$="[[_isHidden(image)]]" src="[[image]]" alt="[[alt]]" placeholder="[[placeholderImage]]" preload="[[preloadImage]]" fade="[[fadeImage]]"></iron-image><div hidden$="[[!heading]]" class$="title-text [[_computeHeadingClass(image)]]">[[heading]]</div></div><slot></slot></template><script>Polymer({is:'paper-card',properties:{heading:{type:String,value:'',observer:'_headingChanged'},image:{type:String,value:''},alt:{type:String},preloadImage:{type:Boolean,value:!1},fadeImage:{type:Boolean,value:!1},placeholderImage:{type:String,value:null},elevation:{type:Number,value:1,reflectToAttribute:!0},animatedShadow:{type:Boolean,value:!1},animated:{type:Boolean,reflectToAttribute:!0,readOnly:!0,computed:'_computeAnimated(animatedShadow)'}},_isHidden:function(a){return a?'false':'true'},_headingChanged:function(a){var b=this.getAttribute('heading'),c=this.getAttribute('aria-label');('string'!==typeof c||c===b)&&this.setAttribute('aria-label',a)},_computeHeadingClass:function(a){return a?' over-image':''},_computeAnimated:function(a){return a}});</script></dom-module><dom-module id="nw-check" assetpath="../"><template><style>:host{display:flex;justify-content:center;align-items:center;margin:16px;}iron-icon{height:2em;width:2em;margin-right:10px;}#label{font-size:1.5em;}</style><iron-icon style="[[checkStyle(checked)]]" icon="[[icon(checked)]]"></iron-icon><div id="label"><slot></slot></div></template><script>var NWCheck=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'icon',value:function(a){return a?'check':'cancel'}},{key:'checkStyle',value:function(a){return'color: '+(a?'green':'red')}}],[{key:'is',get:function(){return'nw-check'}},{key:'properties',get:function(){return{checked:{type:Boolean,value:!1}}}}]),b}(Polymer.Element);customElements.define(NWCheck.is,NWCheck);</script></dom-module></div><dom-module id="checkin-page"><template><style include="light-page">paper-card{width:100%;color:black;}paper-checkbox{width:100%;margin-top:16px;box-sizing:border-box;text-decoration:none;letter-spacing:2px;border-radius:3px;border:none;font-weight:bold;letter-spacing:3px;padding:11px 15px;text-transform:uppercase;cursor:pointer;border-bottom:4px solid #D74343;background-color:#FF6B6B;--primary-text-color:var(--dark-text-color);--paper-checkbox-label:{width:100%;text-align:center;position:absolute;left:0;padding-left:0;};transition:background-color 140ms, border-color 140ms;}paper-checkbox[checked]{border-color:#4BAE74;background-color:#90cfaa;}[bad]{color:red;}[good]{color:green;}[warn]{color:orange;}.completion{padding:10px;cursor:pointer;}.completion:hover{background-color:rgba(0,0,0,0.1);}.completion[selected]{background-color:rgba(0,0,0,0.2);}[hidden]{display:none;}code{font-family:monospace;background-color:rgba(0,0,0,0.9);padding:6px;color:var(--dark-text-color);}h3{margin-top:80px;}paper-card p{font-size:24pt;text-align:center;text-transform:capitalize;padding:10px;font-weight:lighter;border-radius:3px;}paper-card p[warn]{background-color:#f28500;color:white;}paper-card p[danger]{background-color:#D74343;color:white;}p:empty{display:none;}p:first-child{margin-top:0;}nw-tags{display:inline-block;margin:16px;}</style><h1 title="">Check-In</h1><div class="content"><center><p><small><b>Shortcuts:</b> Search <code>/</code>, Check-In <code>space</code></small></p></center><paper-input label="Search" value="{{query}}" id="search" disabled="[[!lunr]]"><iron-icon icon="icons:search" prefix=""></iron-icon></paper-input><template is="dom-repeat" items="[[autocomplete]]"><div class="completion" selected$="[[eq(index, autocompleteIndex)]]" on-tap="handleTap">[[name(registrations, item)]] &lt;[[email(registrations, item)]]&gt;</div></template><paper-card heading="[[heading(display)]]" hidden$="[[!display]]"><div class="card-content"><nw-check checked="[[display.rsvp.going]]">RSVPed Going</nw-check><nw-check checked="[[waiver.title]]">Signed Waiver<template is="dom-if" if="[[waiver.title]]">â€” [[waiver.title]]</template></nw-check><center><nw-tags tags="[[display.tags]]" disabled=""></nw-tags></center><paper-checkbox id="checkbox" checked="{{display.checked_in}}">Checked In</paper-checkbox></div></paper-card></div><firebase-document disabled="[[!isAdmin]]" path="/admin/hellosign/[[formatEmail(display.email)]]" data="{{waiver}}"></firebase-document><firebase-query id="regs" disabled="[[!isAdmin]]" path="/form/registration" data="{{registrations}}"></firebase-query></template><script>var CheckinPage=function(a){function b(){return babelHelpers.classCallCheck(this,b),babelHelpers.possibleConstructorReturn(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return babelHelpers.inherits(b,a),babelHelpers.createClass(b,[{key:'connectedCallback',value:function(){var a=this;babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'connectedCallback',this).call(this),this.$.search.addEventListener('keydown',function(b){if(b.stopPropagation(),'ArrowDown'===b.code)a.autocompleteIndex=Math.min(a.autocompleteIndex+1,a.autocomplete.length-1);else if('ArrowUp'===b.code)a.autocompleteIndex=Math.max(a.autocompleteIndex-1,0);else if('Enter'===b.code)a.select();else return;b.preventDefault()}),this.keyHandler=this.keyHandler.bind(this),document.addEventListener('keydown',this.keyHandler)}},{key:'disconnectedCallback',value:function(){babelHelpers.get(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),'disconnectedCallback',this).call(this),document.removeEventListener('keydown',this.keyHandler)}},{key:'keyHandler',value:function(a){if(console.log(a),'Slash'===a.code)this.$.search.focus();else if('Space'===a.code&&this.display)this.set('display.checked_in',!this.display.checked_in);else return;a.preventDefault()}},{key:'handleTap',value:function(a){this.autocompleteIndex=a.model.index,this.select()}},{key:'select',value:function(){var a=this.autocomplete[this.autocompleteIndex];if(a){this.displayID=a;var b=this.registrations[a];void 0===b.checked_in&&(b.checked_in=!1),this.query='',this.display=b,this.linkPaths(['registrations',a],'display'),this.autocomplete=[],this.$.search.blur()}}},{key:'heading',value:function(a){return a.first_name+' '+a.last_name+' <'+a.email+'>'}},{key:'eq',value:function(c,a){return c===a}},{key:'handleRegistrations',value:function(a){a&&(this.updateDuplicateIndex(a),this.updateLunrIndex(a))}},{key:'updateDuplicateIndex',value:function(a){var b=this,c=a.map(function(b){return b.$key}),d={};a.forEach(function(a){var c=b.cleanEmail(a.email);a.cleanEmail=c;var e=d[c]||{count:0},f=e.count;d[c]={last:a.id,count:f+1}});var e={};a.forEach(function(a,b){var c=d[a.cleanEmail],f=c.last,g=c.count;1<g&&f!==a.id&&(e[b]=!0)}),this.duplicateIndices=e}},{key:'cleanEmail',value:function(a){return(a||'').toLowerCase().trim()}},{key:'handleSearch',value:function(a,b){if(a&&b){var c=this.lunr.search(a).slice(0,5).map(function(b){return b.ref});JSON.stringify(c)!==JSON.stringify(this.autocomplete)&&(this.autocompleteIndex=0,this.autocomplete=c,this.display=!1)}}},{key:'updateLunrIndex',value:function(a){if(a){var b=a.length;if(0!==b&&this.lastLunrIndexCount!==b){this.lastLunrIndexCount=b;var c=this,d=lunr(function(){var b=this;this.ref('id'),this.field('email'),this.field('emailSplit'),this.field('name'),this.field('first_name'),this.field('last_name'),a.forEach(function(a,d){c.duplicateIndices[d]||!a.email||b.add({id:d,email:a.email,emailSplit:a.email.replace(/\W+/g,' '),name:a.name,first_name:a.first_name,last_name:a.last_name})})});this.lunr=d}}}},{key:'name',value:function(a,b){var c=a[b];return c.first_name+' '+c.last_name}},{key:'email',value:function(a,b){return a[b].email}},{key:'warnStatus',value:function(a){var b=this.displayStatus(a);return'Accepted, No Response'===b||'waitlisted'===b}},{key:'dangerStatus',value:function(a){var b=this.displayStatus(a);return'rejected'===b}},{key:'displayStatus',value:function(a){return'accepted'===a.status?a.rsvp?'accepted':'Accepted, No Response':a.status}},{key:'warnAge',value:function(a){return a&&-1!==a.indexOf('under')}},{key:'updateStatus',value:function(){var a=this.querySelector('#regs');a&&this.displayID&&this.display&&a.setStoredValue('/form/registration/'+this.displayID+'/checked_in',this.display.checked_in)}},{key:'formatEmail',value:function(a){return a?a.replace(/\./g,'%2E'):void 0}}],[{key:'is',get:function(){return'checkin-page'}},{key:'properties',get:function(){return{display:{value:!1},lunr:{type:Object,value:!1}}}},{key:'observers',get:function(){return['handleRegistrations(registrations)','handleSearch(query, lunr)','updateStatus(display.checked_in)']}}]),b}(Polymer.Element);customElements.define(CheckinPage.is,CheckinPage);</script></dom-module></body></html>